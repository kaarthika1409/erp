{"ast":null,"code":"import api from './api';\nconst handleResponse = async promise => {\n  try {\n    const response = await promise;\n    return response.data;\n  } catch (error) {\n    console.error('Department Service Error:', error);\n    throw error;\n  }\n};\nexport const departmentService = {\n  // Create a new department\n  createDepartment: async departmentData => {\n    try {\n      const response = await api.post('/departments', departmentData);\n      return response.data;\n    } catch (error) {\n      console.error('Create Department Error:', error);\n      throw error;\n    }\n  },\n  // Get all departments\n  getAllDepartments: async () => {\n    try {\n      console.log('Fetching all departments...');\n      const token = localStorage.getItem('token');\n      console.log('Using token:', token ? 'Token exists' : 'No token found');\n      const response = await fetch('http://localhost:5000/api/departments', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        credentials: 'include' // Important for cookies/sessions\n      });\n      console.log('Response status:', response.status);\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('API Error:', errorData);\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Departments API response:', data);\n\n      // Ensure we always return an array\n      const result = Array.isArray(data) ? data : [];\n      console.log('Returning departments:', result);\n      return result;\n    } catch (error) {\n      console.error('Get All Departments Error:', error);\n      // Return empty array instead of throwing to prevent UI crash\n      return [];\n    }\n  },\n  // Get single department by ID\n  getDepartment: async id => {\n    try {\n      const response = await api.get(`/departments/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error('Get Department Error:', error);\n      throw error;\n    }\n  },\n  // Update department\n  updateDepartment: async (id, departmentData) => {\n    try {\n      const response = await api.put(`/departments/${id}`, departmentData);\n      return response.data;\n    } catch (error) {\n      console.error('Update Department Error:', error);\n      throw error;\n    }\n  },\n  // Delete department\n  deleteDepartment: async id => {\n    try {\n      const response = await api.delete(`/departments/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error('Delete Department Error:', error);\n      throw error;\n    }\n  }\n};\nexport default departmentService;","map":{"version":3,"names":["api","handleResponse","promise","response","data","error","console","departmentService","createDepartment","departmentData","post","getAllDepartments","log","token","localStorage","getItem","fetch","method","headers","mode","credentials","status","ok","errorData","json","catch","Error","message","result","Array","isArray","getDepartment","id","get","updateDepartment","put","deleteDepartment","delete"],"sources":["C:/Users/kaart/OneDrive/Desktop/pavakie/frontend/src/services/departmentService.js"],"sourcesContent":["import api from './api';\n\nconst handleResponse = async (promise) => {\n  try {\n    const response = await promise;\n    return response.data;\n  } catch (error) {\n    console.error('Department Service Error:', error);\n    throw error;\n  }\n};\n\nexport const departmentService = {\n  // Create a new department\n  createDepartment: async (departmentData) => {\n    try {\n      const response = await api.post('/departments', departmentData);\n      return response.data;\n    } catch (error) {\n      console.error('Create Department Error:', error);\n      throw error;\n    }\n  },\n\n  // Get all departments\n  getAllDepartments: async () => {\n    try {\n      console.log('Fetching all departments...');\n      const token = localStorage.getItem('token');\n      console.log('Using token:', token ? 'Token exists' : 'No token found');\n      \n      const response = await fetch('http://localhost:5000/api/departments', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        mode: 'cors',\n        credentials: 'include' // Important for cookies/sessions\n      });\n      \n      console.log('Response status:', response.status);\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('API Error:', errorData);\n        throw new Error(errorData.message || `HTTP error! status: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      console.log('Departments API response:', data);\n      \n      // Ensure we always return an array\n      const result = Array.isArray(data) ? data : [];\n      console.log('Returning departments:', result);\n      return result;\n      \n    } catch (error) {\n      console.error('Get All Departments Error:', error);\n      // Return empty array instead of throwing to prevent UI crash\n      return [];\n    }\n  },\n\n  // Get single department by ID\n  getDepartment: async (id) => {\n    try {\n      const response = await api.get(`/departments/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error('Get Department Error:', error);\n      throw error;\n    }\n  },\n\n  // Update department\n  updateDepartment: async (id, departmentData) => {\n    try {\n      const response = await api.put(`/departments/${id}`, departmentData);\n      return response.data;\n    } catch (error) {\n      console.error('Update Department Error:', error);\n      throw error;\n    }\n  },\n\n  // Delete department\n  deleteDepartment: async (id) => {\n    try {\n      const response = await api.delete(`/departments/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error('Delete Department Error:', error);\n      throw error;\n    }\n  }\n};\n\nexport default departmentService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}